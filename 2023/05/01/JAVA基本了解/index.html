<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Java基本了解 | Khaz's Blog</title><meta name="author" content="Khaz"><meta name="copyright" content="Khaz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JAVA基本了解(71条消息) Java–Java版本和JDK版本_java版本和jdk版本区别_MinggeQingchun的博客-CSDN博客  JDK8u311 → JAVA8 java名词Java是将代码编译成一种“字节码”，它类似于抽象的CPU指令，然后，针对不同平台编写虚拟机，不同平台的虚拟机负责加载字节码并执行，这样就实现了“一次编写，到处运行”的效果。    jar包实际上就是一个">
<meta property="og:type" content="article">
<meta property="og:title" content="Java基本了解">
<meta property="og:url" content="http://fgtbnc.github.io/2023/05/01/JAVA%E5%9F%BA%E6%9C%AC%E4%BA%86%E8%A7%A3/index.html">
<meta property="og:site_name" content="Khaz&#39;s Blog">
<meta property="og:description" content="JAVA基本了解(71条消息) Java–Java版本和JDK版本_java版本和jdk版本区别_MinggeQingchun的博客-CSDN博客  JDK8u311 → JAVA8 java名词Java是将代码编译成一种“字节码”，它类似于抽象的CPU指令，然后，针对不同平台编写虚拟机，不同平台的虚拟机负责加载字节码并执行，这样就实现了“一次编写，到处运行”的效果。    jar包实际上就是一个">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fgtbnc.github.io/images/wallhaven-r29l9q.jpg">
<meta property="article:published_time" content="2023-05-01T07:00:25.000Z">
<meta property="article:modified_time" content="2023-09-30T06:38:06.779Z">
<meta property="article:author" content="Khaz">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fgtbnc.github.io/images/wallhaven-r29l9q.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://fgtbnc.github.io/2023/05/01/JAVA%E5%9F%BA%E6%9C%AC%E4%BA%86%E8%A7%A3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":250},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Java基本了解',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-30 14:38:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom/beauty.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/Khazing/typora-img/main/16870577801892f4a9c5aac2e9e5422a6ccd26db10dd88c73.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Khaz's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Java基本了解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-01T07:00:25.000Z" title="发表于 2023-05-01 15:00:25">2023-05-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-09-30T06:38:06.779Z" title="更新于 2023-09-30 14:38:06">2023-09-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>13分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Java基本了解"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="JAVA基本了解"><a href="#JAVA基本了解" class="headerlink" title="JAVA基本了解"></a>JAVA基本了解</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/MinggeQingchun/article/details/120578602">(71条消息) Java–Java版本和JDK版本_java版本和jdk版本区别_MinggeQingchun的博客-CSDN博客</a></p>
<p><img src="/../images/image-20230501122332032.png" alt="image-20230501122332032"></p>
<p>JDK8u311 → JAVA8</p>
<h3 id="java名词"><a href="#java名词" class="headerlink" title="java名词"></a>java名词</h3><p>Java是将代码编译成一种“字节码”，它类似于抽象的CPU指令，然后，针对不同平台编写虚拟机，不同平台的虚拟机负责加载字节码并执行，这样就实现了“一次编写，到处运行”的效果。</p>
<p><img src="/../images/image-20230425225221871.png" alt="image-20230425225221871"></p>
<p><img src="/../images/image-20230425225139403.png" alt="image-20230425225139403"></p>
<p><img src="/../images/image-20230425225121609.png" alt="image-20230425225121609"></p>
<p>jar包实际上就是一个zip格式的压缩文件</p>
<h3 id="运行java程序"><a href="#运行java程序" class="headerlink" title="运行java程序"></a>运行java程序</h3><p><img src="/../images/image-20230425225313657.png" alt="image-20230425225313657"></p>
<p>一个Java源码只能定义一个<code>public</code>类型的class，并且class名称和文件名要完全一致；</p>
<p>注意：</p>
<p>我们通常说的Java 8，Java 11，Java 17，是指JDK的版本，也就是JVM的版本</p>
<p>而每个版本的JVM，它能执行的class文件版本也不同。例如，Java 11对应的class文件版本是55，而Java 17对应的class文件版本是61。</p>
<p><strong>高版本的JDK可编译输出低版本兼容的class文件</strong>，但需注意，低版本的JDK可能不存在高版本JDK添加的类和方法，导致运行时报错。</p>
<p>运行时使用哪个JDK版本，编译时就尽量使用同一版本编译源码。</p>
<h3 id="类与对象"><a href="#类与对象" class="headerlink" title="类与对象"></a>类与对象</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p><img src="/../images/image-20230425225605486.png" alt="image-20230425225605486"></p>
<p><img src="/../images/image-20230425225757719.png" alt="image-20230425225757719"></p>
<p>定义private字段和pubilc方法来操作private字段</p>
<blockquote>
<p>虽然外部代码不能直接修改<code>private</code>字段，但是，外部代码可以调用方法<code>setName()</code>和<code>setAge()</code>来间接修改<code>private</code>字段。在方法内部，我们就有机会检查参数对不对。比如，<code>setAge()</code>就会检查传入的参数，参数超出了范围，直接报错。这样，外部代码就没有任何机会把<code>age</code>设置成不合理的值。</p>
</blockquote>
<p>定义private方法</p>
<blockquote>
<p><code>private</code>方法，外部代码无法调用，但是，内部方法可以调用它。</p>
<p>方法可以封装一个类的对外接口，调用方不需要知道也不关心字段是否存在</p>
</blockquote>
<h4 id="Java-Bean"><a href="#Java-Bean" class="headerlink" title="Java Bean"></a>Java Bean</h4><blockquote>
<p>JavaBean是一种符合命名规范的<code>class</code>，它通过<code>getter</code>和<code>setter</code>来定义属性；</p>
</blockquote>
<p>例子</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="built_in">this</span>.name; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="built_in">this</span>.age; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123; <span class="built_in">this</span>.age = age; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><p><img src="/../images/image-20230425233400613.png" alt="image-20230425233400613"></p>
<h4 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4><blockquote>
<p>如果一个<code>class</code>定义了方法，但没有具体执行代码，这个方法就是抽象方法，抽象方法用<code>abstract</code>修饰。</p>
<p>因为无法执行抽象方法，因此这个类也必须申明为抽象类（abstract class）。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用<code>abstract</code>修饰的类就是抽象类。我们无法实例化一个抽象类：</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(); <span class="comment">// 编译错误</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>无法实例化的抽象类有什么用？</p>
<p>因为抽象类本身被设计成只能用于被继承，因此，抽象类可以强迫子类实现其定义的抽象方法，否则编译会报错。因此，抽象方法实际上相当于定义了“规范”：即规定高层类的接口，从而保证所有子类都有相同的接口实现，这样，多态就能发挥出威力。</p>
</blockquote>
<h4 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h4><blockquote>
<p>如果一个抽象类没有字段，所有方法全部都是抽象方法，就可以把该抽象类改写为接口：<code>interface</code>。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">getName</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当一个具体的<code>class</code>去实现一个<code>interface</code>时，需要使用<code>implements</code>关键字。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot; run&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接口的继承</p>
<p><img src="/../images/image-20230425233728359.png" alt="image-20230425233728359"></p>
<h4 id="静态字段和静态方法"><a href="#静态字段和静态方法" class="headerlink" title="静态字段和静态方法"></a>静态字段和静态方法</h4><blockquote>
<p>修饰符static</p>
<p>静态方法和静态字段属于<code>class</code>而不属于实例</p>
</blockquote>
<p><img src="/../images/image-20230425234023210.png" alt="image-20230425234023210"></p>
<p>使用类名来访问</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person.setNumber(<span class="number">99</span>);</span><br><span class="line">System.out.println(Person.number);</span><br></pre></td></tr></table></figure>



<h4 id="包"><a href="#包" class="headerlink" title="包"></a>包</h4><blockquote>
<p>一个包就是一个命名空间</p>
<p>真正的完整类名是<code>包名.类名</code></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> xxx; <span class="comment">// 申明包名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> packge_name.class_name; <span class="comment">// 导入其他包中的类</span></span><br></pre></td></tr></table></figure>

<h4 id="常用类"><a href="#常用类" class="headerlink" title="常用类"></a>常用类</h4><p><img src="/../images/java.lang.png" alt="img"></p>
<h5 id="String对象"><a href="#String对象" class="headerlink" title="String对象"></a>String对象</h5><blockquote>
<p>Java中的String是不可变的，因为String类的存储是通过final修饰的char[]数组来存放结果的，不可更改。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">        System.out.println(s.hashCode());</span><br><span class="line">        System.out.println(s.toUpperCase().hashCode());</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/../images/image-20230428115645212.png" alt="image-20230428115645212"></p>
<h5 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h5><p>内存数据与外存数据，使用字节流或字符流</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>  <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="comment">// getInputStream()获得结果</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Runtime.getRuntime().exec(<span class="string">&quot;whoami&quot;</span>).getInputStream();</span><br><span class="line">        <span class="comment">// 用来缓存命令执行结果数据</span></span><br><span class="line">        <span class="type">byte</span>[] cache = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">byteArrayOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">readLen</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// read方法将数据读取到cache字节数组中，如果返回-1说明到了结尾，数据读取完毕</span></span><br><span class="line">        <span class="keyword">while</span> ((readLen = inputStream.read(cache))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// 数据读取完毕后，write方法将cache数组中从0到readlen的数据写入输出流中</span></span><br><span class="line">            byteArrayOutputStream.write(cache, <span class="number">0</span>, readLen);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(byteArrayOutputStream);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="常见代码"><a href="#常见代码" class="headerlink" title="常见代码"></a>常见代码</h1><h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><h3 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(FileName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开文件对象并创建文件输入流</span></span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义每次输入流读取到的字节数对象</span></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义缓冲区大小</span></span><br><span class="line"><span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建二进制输出流对象</span></span><br><span class="line"><span class="type">ByteArrayOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环读取文件内容</span></span><br><span class="line"><span class="keyword">while</span> ((a = fis.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line"><span class="comment">// 截取缓冲区数组中的内容，(bytes, 0, a)其中的0表示从bytes数组的</span></span><br><span class="line"><span class="comment">// 下标0开始截取，a表示输入流read到的字节数。</span></span><br><span class="line">out.write(bytes, <span class="number">0</span>, a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(out.toString());</span><br></pre></td></tr></table></figure>

<h3 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义写入文件路径</span></span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(FileName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义待写入文件内容</span></span><br><span class="line"><span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> Content;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建FileOutputStream对象</span></span><br><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写入内容二进制到文件</span></span><br><span class="line">fos.write(content.getBytes());</span><br><span class="line">fos.flush();</span><br><span class="line">fos.close();</span><br></pre></td></tr></table></figure>



<h2 id="命令执行"><a href="#命令执行" class="headerlink" title="命令执行"></a>命令执行</h2><p><a target="_blank" rel="noopener" href="https://y4er.com/posts/java-exec-command/">Java下多种执行命令的姿势及问题 - Y4er的博客</a></p>
<h3 id="Runtime-exec"><a href="#Runtime-exec" class="headerlink" title="Runtime.exec"></a>Runtime.exec</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> Runtime.getRuntime().exec(<span class="string">&quot;calc.exe&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="ProcessBuilder"><a href="#ProcessBuilder" class="headerlink" title="ProcessBuilder"></a>ProcessBuilder</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">ProcessBuilder</span> <span class="variable">processBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessBuilder</span>().command(<span class="string">&quot;calc.exe&quot;</span>);</span><br><span class="line"><span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> processBuilder.start();     </span><br></pre></td></tr></table></figure>

<h3 id="ProcessImpl"><a href="#ProcessImpl" class="headerlink" title="ProcessImpl"></a>ProcessImpl</h3><blockquote>
<p>ProcessImpl是更为底层的实现，Runtime和ProcessBuilder执行命令实际上也是调用了ProcessImpl这个类，对于ProcessImpl类我们不能直接调用，但是可以通过反射来间接调用ProcessImpl来达到执行命令的目的。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] cmds = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;calc.exe&quot;</span>&#125;;</span><br><span class="line"><span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.ProcessImpl&quot;</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;start&quot;</span>, String[].class, Map.class, String.class, ProcessBuilder.Redirect[].class, <span class="type">boolean</span>.class);</span><br><span class="line">method.setAccessible(<span class="literal">true</span>);</span><br><span class="line"><span class="type">Process</span> <span class="variable">e</span> <span class="operator">=</span> (Process) method.invoke(<span class="literal">null</span>, cmds, <span class="literal">null</span>, <span class="string">&quot;.&quot;</span>, <span class="literal">null</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>



<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">CLASS_NAME</span> <span class="operator">=</span> <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">URL</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/mysql&quot;</span></span><br><span class="line"><span class="type">String</span> <span class="variable">USERNAME</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">PASSWORD</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line"></span><br><span class="line">Class.forName(CLASS_NAME);<span class="comment">// 注册JDBC驱动类</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(URL, USERNAME, PASSWORD);</span><br></pre></td></tr></table></figure>

<h3 id="查询sql语句"><a href="#查询sql语句" class="headerlink" title="查询sql语句"></a>查询sql语句</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取用户传入的用户名</span></span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义最终执行的SQL语句，这里会将用户从请求中传入的host字符串拼接到最终的SQL</span></span><br><span class="line"><span class="comment">// 语句当中，从而导致了SQL注入漏洞。</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select host,user from mysql.user where user = &#x27;&quot;</span> + user + <span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建预编译对象</span></span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">pstt</span> <span class="operator">=</span> connection.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行SQL语句并获取返回结果对象</span></span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pstt.executeQuery();</span><br></pre></td></tr></table></figure>

<p>正确使用预编译（使用？占位符代替用户输入）进行修复</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取用户传入的用户名</span></span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义最终执行的SQL语句，这里会将用户从请求中传入的host字符串拼接到最终的SQL</span></span><br><span class="line"><span class="comment">// 语句当中，从而导致了SQL注入漏洞。</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select host,user from mysql.user where user = ?&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建预编译对象</span></span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">pstt</span> <span class="operator">=</span> connection.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行SQL语句并获取返回结果对象</span></span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pstt.executeQuery();</span><br></pre></td></tr></table></figure>

<h2 id="URL请求-SSRF"><a href="#URL请求-SSRF" class="headerlink" title="URL请求+SSRF"></a>URL请求+SSRF</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;https://www.baidu.com&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开和url之间的连接</span></span><br><span class="line"><span class="type">URLConnection</span> <span class="variable">connection</span> <span class="operator">=</span> url.openConnection();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置请求参数</span></span><br><span class="line">connection.setRequestProperty(<span class="string">&quot;user-agent&quot;</span>, <span class="string">&quot;javasec&quot;</span>);</span><br><span class="line">connection.setConnectTimeout(<span class="number">1000</span>);</span><br><span class="line">connection.setReadTimeout(<span class="number">1000</span>);</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 建立实际连接</span></span><br><span class="line">connection.connect();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取响应头字段信息列表</span></span><br><span class="line">connection.getHeaderFields();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取URL响应</span></span><br><span class="line">connection.getInputStream();</span><br><span class="line"></span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">response</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(connection.getInputStream()));</span><br><span class="line">String line;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ((line = in.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">response.append(<span class="string">&quot;/n&quot;</span>).append(line);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.print(response.toString());</span><br></pre></td></tr></table></figure>

<p>当url参数可控时，会造成ssrf漏洞，JAVA的ssrf主要利用方式如下</p>
<ul>
<li><p>利用file协议读取文件内容（仅限使用<code>URLConnection|URL</code>发起的请求）</p>
</li>
<li><p>利用http 进行内网web服务端口探测</p>
</li>
<li><p>利用http 进行内网非web服务端口探测(如果将异常抛出来的情况下)</p>
</li>
<li><p>利用http进行ntlmrelay攻击(仅限<code>HttpURLConnection</code>或者二次包装<code>HttpURLConnection</code>并未复写<code>AuthenticationInfo</code>方法的对象)</p>
</li>
</ul>
<h1 id="类加载器"><a href="#类加载器" class="headerlink" title="类加载器"></a>类加载器</h1><p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/9002">JAVA安全基础（一）–类加载器（ClassLoader） - 先知社区</a></p>
<h1 id="反序列化"><a href="#反序列化" class="headerlink" title="反序列化"></a>反序列化</h1><p>CC&#x2F;CB&#x2F;7u21&#x2F;8u20</p>
<p>分析尝试阅读并魔改ysoserial</p>
<p>JEP 290是什么</p>
<p>JEP290是Java底层为了缓解反序列化攻击提出的一种解决方案，主要做了以下几件事</p>
<ol>
<li>提供一个限制反序列化类的机制，白名单或者黑名单。</li>
<li>限制反序列化的深度和复杂度。</li>
<li>为RMI远程调用对象提供了一个验证类的机制。</li>
<li>定义一个可配置的过滤机制，比如可以通过配置properties文件的形式来定义过滤器。</li>
</ol>
<h1 id="JAVA-Agent"><a href="#JAVA-Agent" class="headerlink" title="JAVA Agent"></a>JAVA Agent</h1><h1 id="内存马"><a href="#内存马" class="headerlink" title="内存马"></a>内存马</h1><p><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/279160#h3-1">内存马探究-安全客 - 安全资讯平台</a></p>
<p><a target="_blank" rel="noopener" href="https://trrqsec.github.io/2022/04/10/Java%E5%AE%89%E5%85%A8-Tomcat%E5%86%85%E5%AD%98%E9%A9%AC%E5%AD%A6%E4%B9%A0/">Java安全-Tomcat内存马学习-信息安全博客</a></p>
<p><a target="_blank" rel="noopener" href="http://wjlshare.com/archives/1529">Tomcat 内存马学习(一)：Filter型 – 天下大木头</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/343105.html">Tomcat Filter 型内存马流程理解与手写 EXP - FreeBuf网络安全行业门户</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/whgk/p/6399262.html">Java Web(一) Servlet详解！！ - 有梦想的老王 - 博客园</a></p>
<h2 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h2><p><img src="file://E:/blog/source/images/201909251250360.png?lastModify=1695796287" alt="在这里插入图片描述"></p>
<blockquote>
<p>客户端发起一个http请求，比如get类型。</p>
<p>Tomcat 作为Servlet容器,将http请求文本接收并解析，然后封装成HttpServletRequest类型的request对象，传递给servlet；</p>
<p>Servlet容器接收到请求，根据请求信息，封装成HttpServletRequest和HttpServletResponse对象。 Servlet容器调用HttpServlet的init()方法，init方法只在第一次请求的时候被调用。 Servlet容器调用service()方法。 service()方法根据请求类型，这里是get类型，分别调用doGet或者doPost方法，这里调用doGet方法。 doXXX方法中是我们自己写的业务逻辑。</p>
<p>业务逻辑处理完成之后，返回给Servlet容器，Servlet容器会将响应的信息封装为HttpServletResponse类型的response对象，然后将response交给tomcat，tomcat就会将其变成响应文本的格式发送给浏览器，然后容器将结果返回给客户端。</p>
<p>容器关闭时候，会调用destory方法</p>
</blockquote>
<p>Tomcat的配置</p>
<p><img src="file://E:/blog/source/images/v2-c3adc47d4c42dae472308ca19eb84374_720w.webp?lastModify=1695796287" alt="img"></p>
<ul>
<li>Server 元素表示整个 Catalina servlet 容器。</li>
<li>Service元素表示一个或多个连接器组件的组合，这些组件共享一个用于处理传入请求的引擎组件。Server 中可以有多个 Service。</li>
<li>Executor表示可以在Tomcat中的组件之间共享的线程池。</li>
<li>Connector代表连接组件。Tomcat 支持三种协议：HTTP&#x2F;1.1、HTTP&#x2F;2.0、AJP。</li>
<li>Context元素表示一个Web应用程序，它在特定的虚拟主机中运行。每个Web应用程序都基于Web应用程序存档（WAR）文件，或者包含相应的解包内容的相应目录，如Servlet规范述。</li>
<li>Engine元素表示与特定的Catalina服务相关联的整个请求处理机器。它接收并处理来自一个或多个连接器的所有请求，并将完成的响应返回给连接器，以便最终传输回客户端。</li>
<li>Host元素表示一个虚拟主机，它是一个服务器的网络名称（如“<a href="www.mycompany.com">www.mycompany.com</a>”）与运行Tomcat的特定服务器的关联。</li>
</ul>
<p><img src="file://E:/blog/source/images/1622447564_60b495cc4ddf6ab5c7b98.png!small?lastModify=1695796287" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Engine，实现类为 org.apache.catalina.core.StandardEngine</span><br><span class="line">Host，实现类为 org.apache.catalina.core.StandardHost</span><br><span class="line">Context，实现类为 org.apache.catalina.core.StandardContext</span><br><span class="line">Wrapper，实现类为 org.apache.catalina.core.StandardWrapper</span><br></pre></td></tr></table></figure>

<p>Tomcat启动加载的顺序：Listener -&gt; Filter -&gt; Servlet</p>
<h2 id="传统web应用型"><a href="#传统web应用型" class="headerlink" title="传统web应用型"></a>传统web应用型</h2><h3 id="listener类型"><a href="#listener类型" class="headerlink" title="listener类型"></a>listener类型</h3><p>最终实例化出来的监听器被存储在 <code>applicationEventListenersList</code> 属性中</p>
<p>所以内存马构造中需要获取到 StandardContext 类，然后获取其applicationEventListenersList 属性，最后注入我们构造的恶意监听器到 applicationEventListenersList 属性里</p>
<h3 id="filter类型"><a href="#filter类型" class="headerlink" title="filter类型"></a>filter类型</h3><p><a target="_blank" rel="noopener" href="http://wjlshare.com/archives/1529">Tomcat 内存马学习(一)：Filter型 – 天下大木头</a></p>
<p><strong>动态注册恶意 Filter，并且将其放到 <code>filterChain</code>的最前面</strong></p>
<h4 id="filter过滤器工作原理"><a href="#filter过滤器工作原理" class="headerlink" title="filter过滤器工作原理"></a>filter过滤器工作原理</h4><p><img src="file://E:/blog/source/images/image-20210331212905616.png?lastModify=1695796287" alt="image-20210331212905616"></p>
<ol>
<li>根据请求的 URL 从 <code>FilterMaps</code> 中遍历<code>FilterMap</code>找出与之 URL 对应的 Filter 名称</li>
<li>根据 Filter 名称去 <code>FilterConfigs</code> 中寻找对应名称的 <code>FilterConfig</code></li>
<li>找到对应的 <code>FilterConfig</code> 之后添加到<code>FilterChain</code>中，并且返回 <code>FilterChain</code></li>
<li><code>filterChain</code>中调用 <code>internalDoFilter</code> 遍历获取 chain 中的 <code>FilterConfig</code>，然后从<code>FilterConfig</code> 中获取 Filter，然后调用 Filter 的 doFilter 方法</li>
</ol>
<blockquote>
<p>关键点在于<code>FilterMap</code>和<code>FilterConfig</code>，如果我们可以控制这两个变量，我们就可以任意注册filter。</p>
<p>他们存储在<code>StandardContext</code>的属性<code>FilterMaps</code>和<code>FilterConfigs</code>中，而<code>StandardContext</code>是可以获得的，<code>filterconfig</code>中需要添加的<code>filterdef</code>也是我们可控的，综上filter动态添加过程是我们可操控的。</p>
</blockquote>
<p><img src="file://E:/blog/source/images/image-20230424230657970.png?lastModify=1695796287" alt="image-20230424230657970"></p>
<ul>
<li><p><code>filterConfigs</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">存放filterConfig的数组，在 FilterConfig 中主要存放 FilterDef 和 Filter对象等信息</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>filterDefs</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">存放FilterDef的数组 ，FilterDef 中存储着我们过滤器名，过滤器实例，作用 url 等基本信息</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>filterMaps</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">存放FilterMap的数组，在 FilterMap 中主要存放了 FilterName 和 对应的URLPattern</span><br></pre></td></tr></table></figure></li>
</ul>
<p>思路：</p>
<ol>
<li>创建一个恶意 Filter</li>
<li>利用 FilterDef 对 Filter 进行一个封装</li>
<li>将 FilterDef 添加到 FilterDefs 和 FilterConfig</li>
<li>创建 FilterMap ，将我们的 Filter 和 urlpattern 相对应，存放到 filterMaps中（由于 Filter 生效会有一个先后顺序，所以我们一般都是放在最前面，让我们的 Filter 最先触发）</li>
</ol>
<p><img src="file://E:/blog/source/images/image-20230424231859397.png?lastModify=1695796287" alt="image-20230502220543589"></p>
<h3 id="servlet类型"><a href="#servlet类型" class="headerlink" title="servlet类型"></a>servlet类型</h3><p>工作流程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">装载：启动服务器时加载Servlet的实例</span><br><span class="line"></span><br><span class="line">初始化：web服务器启动时或web服务器接收到请求时，或者两者之间的某个时刻启动。初始化工作有init()方法负责执行完成</span><br><span class="line"></span><br><span class="line">调用：即每次调用Servlet的service()，从第一次到以后的多次访问，都是只是调用doGet()或doPost()方法（doGet、doPost内部实现，具体参照HttpServlet类service()的重写）</span><br><span class="line"></span><br><span class="line">销毁：停止服务器时调用destroy()方法，销毁实例</span><br></pre></td></tr></table></figure>

<p>Servlet需要重写doGet和doPost</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. 通过 context.createWapper() 创建 Wapper 对象；</span><br><span class="line"></span><br><span class="line">2. 设置 Servlet 的 LoadOnStartUp 的值；（优先级）</span><br><span class="line"></span><br><span class="line">3. 设置 Servlet 的 Name；</span><br><span class="line"></span><br><span class="line">4. 设置 Servlet 对应的 Class；</span><br><span class="line"></span><br><span class="line">5. 将 Servlet 添加到 context 的 children 中；</span><br><span class="line"></span><br><span class="line">6. 将 url 路径和 servlet 类做映射。</span><br></pre></td></tr></table></figure>







<h2 id="排查"><a href="#排查" class="headerlink" title="排查"></a>排查</h2><p>阿里巴巴的Java诊断工具–阿尔萨斯</p>
<p>注意启动用的java版本要和启动tomcat的java版本一致，用户一致。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># servelt</span><br><span class="line">mbean | grep &quot;name=/&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># filter</span><br><span class="line">sc *.Filter # 模糊搜索，列出所有调用了 Filter 的类</span><br><span class="line">sc -d org.apache.coyote.module.SimpleSerializers # classloader</span><br><span class="line"></span><br><span class="line">classloader # 查看类加载器加载了哪些类</span><br><span class="line"></span><br><span class="line">jad --source-only org.apache.jsp.evil_jsp # 反编译类</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 终极排查 heapdump</span><br><span class="line">heapdump</span><br><span class="line">strings /var/cache/tomcat/temp/heapdump2022-10-19-12-464292342944555007800.hprof | grep &quot;POST /&quot;</span><br></pre></td></tr></table></figure>



<p><img src="file://E:/blog/source/images/image-20230503204528006.png?lastModify=1695796287" alt="image-20230503204528006"></p>
<p><img src="file://E:/blog/source/images/image-20230426163320217.png?lastModify=1695796287" alt="image-20230426163320217"></p>
<p>动态注册，对比<code>web.xml</code>中的配置</p>
<h1 id="报错解决"><a href="#报错解决" class="headerlink" title="报错解决"></a>报错解决</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22076345/article/details/82392236">(69条消息) Intellij idea 报错：Error : java 不支持发行版本5_idea错误不支持发行版本5_灵颖桥人的博客-CSDN博客</a></p>
<p>[<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_36210698/article/details/71036504">idea] 编译报错 javacTask:源发行版1.8 需要目标发行版1.8_姜小衰的博客-CSDN博客</a></p>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://fgtbnc.github.io/images/wallhaven-r29l9q.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/05/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B9%8BURLDNS%E9%93%BE/"><img class="prev-cover" src="https://fgtbnc.github.io/images/wallhaven-wyg7g6.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java反序列化之URLDNS</div></div></a></div><div class="next-post pull-right"><a href="/2023/05/01/JNDI/"><img class="next-cover" src="https://fgtbnc.github.io/images/wallhaven-xlz933.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JNDI</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/Khazing/typora-img/main/16870577801892f4a9c5aac2e9e5422a6ccd26db10dd88c73.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Khaz</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">脚本小子的学习笔记</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JAVA%E5%9F%BA%E6%9C%AC%E4%BA%86%E8%A7%A3"><span class="toc-number">1.</span> <span class="toc-text">JAVA基本了解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#java%E5%90%8D%E8%AF%8D"><span class="toc-number">1.0.1.</span> <span class="toc-text">java名词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8Cjava%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.0.2.</span> <span class="toc-text">运行java程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.0.3.</span> <span class="toc-text">类与对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">1.0.3.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Java-Bean"><span class="toc-number">1.0.3.2.</span> <span class="toc-text">Java Bean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">1.0.3.3.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-number">1.0.3.4.</span> <span class="toc-text">抽象类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.0.3.5.</span> <span class="toc-text">接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%AD%97%E6%AE%B5%E5%92%8C%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-number">1.0.3.6.</span> <span class="toc-text">静态字段和静态方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85"><span class="toc-number">1.0.3.7.</span> <span class="toc-text">包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%B1%BB"><span class="toc-number">1.0.3.8.</span> <span class="toc-text">常用类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#String%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.0.3.8.1.</span> <span class="toc-text">String对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#IO"><span class="toc-number">1.0.3.8.2.</span> <span class="toc-text">IO</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E4%BB%A3%E7%A0%81"><span class="toc-number">2.</span> <span class="toc-text">常见代码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">2.1.</span> <span class="toc-text">文件操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E6%96%87%E4%BB%B6"><span class="toc-number">2.1.1.</span> <span class="toc-text">读文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%99%E6%96%87%E4%BB%B6"><span class="toc-number">2.1.2.</span> <span class="toc-text">写文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="toc-number">2.2.</span> <span class="toc-text">命令执行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Runtime-exec"><span class="toc-number">2.2.1.</span> <span class="toc-text">Runtime.exec</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ProcessBuilder"><span class="toc-number">2.2.2.</span> <span class="toc-text">ProcessBuilder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ProcessImpl"><span class="toc-number">2.2.3.</span> <span class="toc-text">ProcessImpl</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.3.</span> <span class="toc-text">数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.3.1.</span> <span class="toc-text">连接数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2sql%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.3.2.</span> <span class="toc-text">查询sql语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#URL%E8%AF%B7%E6%B1%82-SSRF"><span class="toc-number">2.4.</span> <span class="toc-text">URL请求+SSRF</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="toc-number">3.</span> <span class="toc-text">类加载器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">4.</span> <span class="toc-text">反序列化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JAVA-Agent"><span class="toc-number">5.</span> <span class="toc-text">JAVA Agent</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E9%A9%AC"><span class="toc-number">6.</span> <span class="toc-text">内存马</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86"><span class="toc-number">6.1.</span> <span class="toc-text">前置知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9Fweb%E5%BA%94%E7%94%A8%E5%9E%8B"><span class="toc-number">6.2.</span> <span class="toc-text">传统web应用型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#listener%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.2.1.</span> <span class="toc-text">listener类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filter%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.2.2.</span> <span class="toc-text">filter类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#filter%E8%BF%87%E6%BB%A4%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">6.2.2.1.</span> <span class="toc-text">filter过滤器工作原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#servlet%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.2.3.</span> <span class="toc-text">servlet类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E6%9F%A5"><span class="toc-number">6.3.</span> <span class="toc-text">排查</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3"><span class="toc-number">7.</span> <span class="toc-text">报错解决</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/08/03/%E5%B8%B8%E8%A7%81%E7%82%B9%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E5%B0%8F%E7%BB%93/" title="Pentest Note"><img src="https://fgtbnc.github.io/images/wallhaven-wyg7g6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pentest Note"/></a><div class="content"><a class="title" href="/2023/08/03/%E5%B8%B8%E8%A7%81%E7%82%B9%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E5%B0%8F%E7%BB%93/" title="Pentest Note">Pentest Note</a><time datetime="2023-08-03T11:48:25.000Z" title="发表于 2023-08-03 19:48:25">2023-08-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/03/%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E8%AE%B0%E5%BD%95/" title="常见应用记录"><img src="https://fgtbnc.github.io/images/wallhaven-vg3qk8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常见应用记录"/></a><div class="content"><a class="title" href="/2023/08/03/%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E8%AE%B0%E5%BD%95/" title="常见应用记录">常见应用记录</a><time datetime="2023-08-03T11:46:25.000Z" title="发表于 2023-08-03 19:46:25">2023-08-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/26/Sql%E6%B3%A8%E5%85%A5-Mysql/" title="Sql注入详解--Mysql"><img src="https://fgtbnc.github.io/images/wallhaven-vg3qk8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Sql注入详解--Mysql"/></a><div class="content"><a class="title" href="/2023/06/26/Sql%E6%B3%A8%E5%85%A5-Mysql/" title="Sql注入详解--Mysql">Sql注入详解--Mysql</a><time datetime="2023-06-26T11:52:40.000Z" title="发表于 2023-06-26 19:52:40">2023-06-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/26/Waf%E7%BB%95%E8%BF%87%E5%AD%A6%E4%B9%A0/" title="WAF绕过学习"><img src="https://fgtbnc.github.io/images/wallhaven-xlz933.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WAF绕过学习"/></a><div class="content"><a class="title" href="/2023/06/26/Waf%E7%BB%95%E8%BF%87%E5%AD%A6%E4%B9%A0/" title="WAF绕过学习">WAF绕过学习</a><time datetime="2023-06-26T11:50:25.000Z" title="发表于 2023-06-26 19:50:25">2023-06-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/26/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B/" title="渗透测试流程"><img src="https://fgtbnc.github.io/images/wallhaven-vg3qk8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="渗透测试流程"/></a><div class="content"><a class="title" href="/2023/06/26/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B/" title="渗透测试流程">渗透测试流程</a><time datetime="2023-06-26T11:48:25.000Z" title="发表于 2023-06-26 19:48:25">2023-06-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Khaz</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script src="/js/chocolate.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>