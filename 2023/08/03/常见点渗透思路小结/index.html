<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Pentest Note | Khaz's Blog</title><meta name="author" content="Khaz"><meta name="copyright" content="Khaz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="感受 靶场和实际环境 感觉靶场和实际渗透的环境一个很大的差别就是实际环境中有各种安全设备和其他防护。靶场中的各种应用环境几乎都是默认的，直接拿着原本的payload就可以了，但在实际中开发很可能会进行二次开发，又或者做出一些防御手段，这就导致了payload应该怎么变化去打，又或者是知道某种情况下对方已经从源头防御了，无需花费精力去尝试。  渗透测试（我太菜了😭） 测试测试就是要勇于尝试，细心和">
<meta property="og:type" content="article">
<meta property="og:title" content="Pentest Note">
<meta property="og:url" content="http://fgtbnc.github.io/2023/08/03/%E5%B8%B8%E8%A7%81%E7%82%B9%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E5%B0%8F%E7%BB%93/index.html">
<meta property="og:site_name" content="Khaz&#39;s Blog">
<meta property="og:description" content="感受 靶场和实际环境 感觉靶场和实际渗透的环境一个很大的差别就是实际环境中有各种安全设备和其他防护。靶场中的各种应用环境几乎都是默认的，直接拿着原本的payload就可以了，但在实际中开发很可能会进行二次开发，又或者做出一些防御手段，这就导致了payload应该怎么变化去打，又或者是知道某种情况下对方已经从源头防御了，无需花费精力去尝试。  渗透测试（我太菜了😭） 测试测试就是要勇于尝试，细心和">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fgtbnc.github.io/images/wallhaven-vg3qk8.jpg">
<meta property="article:published_time" content="2023-08-03T11:48:25.000Z">
<meta property="article:modified_time" content="2023-09-27T03:40:17.127Z">
<meta property="article:author" content="Khaz">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fgtbnc.github.io/images/wallhaven-vg3qk8.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://fgtbnc.github.io/2023/08/03/%E5%B8%B8%E8%A7%81%E7%82%B9%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E5%B0%8F%E7%BB%93/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":250},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Pentest Note',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-27 11:40:17'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom/beauty.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/Khazing/typora-img/main/16870577801892f4a9c5aac2e9e5422a6ccd26db10dd88c73.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://fgtbnc.github.io/images/wallhaven-vg3qk8.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Khaz's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Pentest Note</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-08-03T11:48:25.000Z" title="发表于 2023-08-03 19:48:25">2023-08-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-09-27T03:40:17.127Z" title="更新于 2023-09-27 11:40:17">2023-09-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Pentest Note"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="感受"><a href="#感受" class="headerlink" title="感受"></a>感受</h1><ul>
<li><p>靶场和实际环境</p>
<p>感觉靶场和实际渗透的环境一个很大的差别就是实际环境中有各种安全设备和其他防护。靶场中的各种应用环境几乎都是默认的，直接拿着原本的payload就可以了，但在实际中开发很可能会进行二次开发，又或者做出一些防御手段，这就导致了payload应该怎么变化去打，又或者是知道某种情况下对方已经从源头防御了，无需花费精力去尝试。</p>
</li>
<li><p>渗透测试（我太菜了😭）</p>
<p>测试测试就是要勇于尝试，细心和耐心（<strong>发散性思维Fuzz</strong>，看到imageupload是否有fileupload。。。。）</p>
<p>自动化提升效率（一些常用的操作就应该脚本自动化）</p>
<p>一定的开发能力（开发或者二开工具脚本的能力）</p>
<p>多看报告，文章来拓展思路（Tools真是好地方）</p>
<p>多复现漏洞</p>
</li>
</ul>
<h1 id="工具箱"><a href="#工具箱" class="headerlink" title="工具箱"></a>工具箱</h1><p><a target="_blank" rel="noopener" href="https://github.com/Khazing/PenKitGui_V2">Khazing&#x2F;PenKitGui_V2: 在 PenKitGui V1 的基础上改进了配置文件的写入方式，更加优雅。 (github.com)</a></p>
<h1 id="常见点渗透思路"><a href="#常见点渗透思路" class="headerlink" title="常见点渗透思路"></a>常见点渗透思路</h1><h2 id="后台"><a href="#后台" class="headerlink" title="后台"></a>后台</h2><blockquote>
<p>TIP：后台处有多个接口系统，当访问不同的接口系统时发现网站的图标发生了变化。</p>
</blockquote>
<ul>
<li>API接口测试</li>
<li>未授权访问和权限绕过</li>
<li>敏感文件扫描</li>
<li>前端源码泄漏：sourcemap</li>
<li>JS中的敏感信息：HAE，SuperSearchPlus，Urlfinder</li>
<li>弱口令</li>
<li>sql注入</li>
<li>逻辑漏洞<ul>
<li>验证码问题</li>
<li>登录，注册，修改密码问题</li>
<li>越权</li>
</ul>
</li>
<li>其他相同站点：指纹提取，fofa</li>
<li>其他域名测试</li>
<li>旁站</li>
</ul>
<h2 id="弱口令"><a href="#弱口令" class="headerlink" title="弱口令"></a>弱口令</h2><ul>
<li><p>能枚举用户名就先枚举</p>
</li>
<li><p>可以看一下密码的复杂度要求</p>
</li>
<li><p>图片验证码绕过</p>
<ul>
<li><p>验证码是否失效</p>
</li>
<li><p>识别</p>
<p><a target="_blank" rel="noopener" href="https://github.com/f0ng/captcha-killer-modified/blob/main/FAQ.md">captcha-killer-modified&#x2F;FAQ.md at main · f0ng&#x2F;captcha-killer-modified</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/4geek/p/17145385.html#!comments">【Security】利用Burp Suite爆破带有验证码Web登录接口（保姆级教程） - 为极客而生 - 博客园</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">regex：<span class="string">&quot;token&quot;</span>:<span class="string">&quot;(.*?)&quot;</span></span><br><span class="line">[*]  use @captcha@ replace captcha</span><br><span class="line">[*]  use @captcha-killer-modified@ replace captcha<span class="string">&#x27;s token</span></span><br></pre></td></tr></table></figure>

<p><img src="/../images/image-20230918104832773.png?lastModify=1695029992" alt="image-20230918104832773"></p>
</li>
</ul>
</li>
<li><p>数据包加密</p>
<ul>
<li><p>破解</p>
<p><a target="_blank" rel="noopener" href="https://gv7.me/articles/2018/fast-locate-the-front-end-encryption-method/">快速定位前端加密方法 | 回忆飘如雪</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.wanghw.cn/security/burpcrypto-single-parameter-cryptoblast.html">BurpCrypto: 对单加密参数的登录接口进行密码爆破的一种方法 – Whwlsfb’s Tech Blog</a></p>
</li>
<li><p>输入一些常见的弱口令，收集加密后的值，然后固定密码，爆破用户名</p>
</li>
<li><p>使用selenium模块模拟手动提交绕过</p>
</li>
</ul>
</li>
<li><p>同一个公司的站点的账号和密码用于撞库</p>
</li>
<li><p>社工字典生成</p>
<p>需要先收集一下邮箱，公司名，工号，网站文章的作者名等信息</p>
</li>
</ul>
<h2 id="403，404"><a href="#403，404" class="headerlink" title="403，404"></a>403，404</h2><h3 id="逐级目录fuzz"><a href="#逐级目录fuzz" class="headerlink" title="逐级目录fuzz"></a>逐级目录fuzz</h3><p>TIP：目录可能为域名的一部分，公司的缩写，api，xxx-api等</p>
<h3 id="403bypass"><a href="#403bypass" class="headerlink" title="403bypass"></a>403bypass</h3><ul>
<li><p>Spring，Shiro权限绕过</p>
<p><a target="_blank" rel="noopener" href="https://github.com/0x727/BypassPro">0x727&#x2F;BypassPro: 对权限绕过自动化bypass的burpsuite插件 (github.com)</a></p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line">403 /actuator/heapdump</span><br><span class="line">200 /actuator/heapdump;.js</span><br><span class="line"></span><br><span class="line">403 /actuator/httptrace</span><br><span class="line">200 /actuator/httptrace/# (burp抓包改)</span><br></pre></td></tr></table></figure>

<p>还有其他特殊情况</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line">404 /sys/actuator </span><br><span class="line">200 /sys/..;/actuator </span><br></pre></td></tr></table></figure>
</li>
<li><p>burpfakeIP</p>
<p><img src="/../images/image-20230911095606358.png?lastModify=1695029992" alt="image-20230911095606358"></p>
<p>  <img src="/../images/image-20230911095617521.png?lastModify=1695029992" alt="image-20230911095617521"></p>
</li>
</ul>
<h2 id="云安全"><a href="#云安全" class="headerlink" title="云安全"></a>云安全</h2><p>强烈推荐teamssix.com师傅搭建的<a target="_blank" rel="noopener" href="https://wiki.teamssix.com/">T Wiki</a></p>
<p><img src="/../images/68747470733a2f2f757a6a756d616b646f776e2d313235363139303038322e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f557a4a754d61726b446f776e496d61676525453525423925424225453725383125414625453725383925383732392e7.png" alt="68747470733a2f2f757a6a756d616b646f776e2d313235363139303038322e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f557a4a754d61726b446f776e496d61676525453525423925424225453725383125414625453725383925383732392e7"></p>
<h3 id="存储桶"><a href="#存储桶" class="headerlink" title="存储桶"></a>存储桶</h3><blockquote>
<p>感觉碰到比较多的是遍历，put上传和AKSK泄漏</p>
</blockquote>
<ul>
<li><p>Bucket 爆破：InvalidBucketName 和 NoSuchBucket</p>
</li>
<li><p>Bucket 接管：NoSuchBucket</p>
<p>类似于子域名接管，只是cname指向的是Bucket</p>
<p><img src="/../images/f8c5eeb73755688f1aaa2701080ea3a6.png?lastModify=1695029992" alt="WeiyiGeek."></p>
<blockquote>
<p>因为域名（源域名）配置了CNAME，但是CNAME指向的域名并没有被注册。那么攻击者可以注册这个CNAME指向的域名，就可以控制了源域名。</p>
<p>因为域名配置了CNAME，但是CNAME指向的Bucket没有被注册（被删除了），那么攻击者可以注册这个CNAME指向的Bucket，从而接管该域名。</p>
<p>参考文章：<a target="_blank" rel="noopener" href="https://kebingzao.com/2021/06/21/s3-subdomain-takeover/">记一次因为 S3 bucket 删除而导致的子域名接管(subdomain takeover)的安全问题 | Zach Ke’s Notes (kebingzao.com)</a></p>
</blockquote>
</li>
<li><p>Bucke遍历</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ossx-main爬取链接</span><br><span class="line">wget批量下载</span><br></pre></td></tr></table></figure>
</li>
<li><p>PUT上传文件</p>
</li>
<li><p>策略可访问&#x2F;修改（&#x2F;?acl）</p>
</li>
</ul>
<p>可以关注一下静态文件是不是从其他域名引入的，一般从其他域名引入的就是从存储桶引入的。</p>
<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>如何判断是否在docker容器内</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ls -al /.dockerenv</span><br></pre></td></tr></table></figure>

<p><img src="/../images/image-20230901114550082.png?lastModify=1695029992" alt="image-20230901114550082"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat /proc/1/cgroup</span><br></pre></td></tr></table></figure>

<p><img src="/../images/image-20230901114605623.png?lastModify=1695029992" alt="image-20230901114605623"></p>
<p>docker容器逃逸检测脚本<a target="_blank" rel="noopener" href="https://github.com/teamssix/container-escape-check">teamssix&#x2F;container-escape-check: docker container escape check || Docker 容器逃逸检测 (github.com)</a></p>
<h2 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h2><h3 id="短信验证码"><a href="#短信验证码" class="headerlink" title="短信验证码"></a>短信验证码</h3><ul>
<li><p>短信轰炸</p>
<p>绕过方法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+86</span><br><span class="line">前后空格</span><br><span class="line">多手机号参数</span><br><span class="line">type参数</span><br><span class="line">手机号长度</span><br><span class="line">Fuzz：%09、%0a、%0c、%0d、%0b、%a0</span><br></pre></td></tr></table></figure>
</li>
<li><p>暴力破解</p>
</li>
<li><p>验证码复用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">验证码有效时间，碰到过一个验证码token是JWT的，修改EXP从而验证码复用</span><br><span class="line">实际不校验验证码</span><br></pre></td></tr></table></figure>
</li>
<li><p>内容篡改</p>
<p><img src="/../images/image-20230907222706136.png?lastModify=1695029992" alt="image-20230901114605623"></p>
</li>
<li><p>任意用户注册&#x2F;登录&#x2F;密码重置</p>
<ul>
<li><p>服务端回显</p>
</li>
<li><p>绑定关系失效</p>
<blockquote>
<p>用自己手机接收到的验证码和他人的手机号通过校验</p>
</blockquote>
</li>
<li><p>短信分发</p>
<blockquote>
<p>一次发送给多个手机号并且收到的验证码是相同的</p>
</blockquote>
<p><img src="/../images/image-20230907222537516.png?lastModify=1695029992" alt="image-20230901114605623"></p>
</li>
<li><p>测试验证码</p>
<blockquote>
<p>配合测试手机号或正常手机号</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/a03-z_dk21DhbG025aqAeg">盘点图形验证码的漏洞挖掘方式，看完之后你还不会挖吗？</a></p>
<h2 id="API接口"><a href="#API接口" class="headerlink" title="API接口"></a>API接口</h2><blockquote>
<p>TIP：很多API接口文档都藏在二级，三级甚至四级目录下（druid什么的也是），推荐使用burp被动扫描<a target="_blank" rel="noopener" href="https://github.com/F6JO/RouteVulScan">F6JO&#x2F;RouteVulScan: Burpsuite - Route Vulnerable Scanning 递归式被动检测脆弱路径的burp插件 (github.com)</a></p>
<p>扫描出来后可以使用APIKit，readapi等进行接口测试</p>
<p>APIkit的缺点：不能使用原始请求头，只保留了Cookie，被动扫描不能关闭，主动扫描只能先扫，再探测接口</p>
</blockquote>
<p>推荐阅读</p>
<p><a target="_blank" rel="noopener" href="https://www.moonsec.com/8370.html">针对Vue前后端分离项目的渗透思路 | (moonsec.com)</a></p>
<p><strong>找一波泄漏的接口</strong></p>
<ul>
<li>泄漏的api文档，比如swagger接口文档</li>
<li>目标公司的开发者平台</li>
<li>SourceMap</li>
</ul>
<p><strong>收集接口</strong></p>
<ul>
<li>supersearchplus</li>
<li>urlfinder</li>
<li>HAE被动收集（进行一些操作，比如登录什么的）</li>
</ul>
<p><strong>测试工具</strong></p>
<ul>
<li><p>存在webpack用packerfuzzer</p>
</li>
<li><p>swagger用swagger-exp</p>
</li>
<li><p>正常接口就收集完毕之后，<strong>确定好BaseDir</strong>，用supersearchplus扫描代理到burp里进行测试</p>
</li>
</ul>
<p><strong>常见测试点</strong></p>
<ul>
<li><p>越权</p>
</li>
<li><p>未授权访问</p>
</li>
<li><p>鉴权的数据，JWT可以测试，其他的如token，sign什么的可以尝试逆向？</p>
</li>
<li><p>后端组件漏洞：如fastjson，log4j</p>
</li>
<li><p>响应数据包信息泄漏：敏感信息，组件版本号，参数泄漏</p>
</li>
<li><p>FUZZ</p>
<ul>
<li>通过已知的接口，猜测未知接口，如看到imageUpload可以试试fileUpload</li>
<li>爆破接口参数</li>
<li>目录扫描</li>
</ul>
</li>
<li><p>Swagger接口</p>
<ul>
<li><p>swagger-ui界面的xss</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line">swagger-ui/index.html?configUrl=https://jumpy-floor.surge.sh/test.json</span><br><span class="line">swagger-ui.html?configUrl=https://jumpy-floor.surge.sh/test.json</span><br></pre></td></tr></table></figure>
</li>
<li><p>接口文档可能不止一个</p>
<p>加载了swagger-resources中的文档地址</p>
<p><img src="/../images/image-20230905205724346.png?lastModify=1695029992" alt="image-20230905205724346"></p>
</li>
</ul>
</li>
<li><p>ReadApi使用</p>
<p><img src="/../images/image-20230829114309049.png?lastModify=1695029992" alt="image-20230829114309049"></p>
<p>扫描完成后，会生成PDF报告</p>
<p><img src="/../images/image-20230829114529740.png?lastModify=1695029992" alt="image-20230829114529740"></p>
<p><img src="/../images/image-20230829114701973.png?lastModify=1695029992" alt="image-20230829114701973"></p>
</li>
</ul>
<h2 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h2><p><a href="https://fgtbnc.github.io/2023/06/01/JWT%E4%BB%A4%E7%89%8C/">JWT安全 | Khaz (fgtbnc.github.io)</a></p>
<h2 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h2><p>万物皆可并发</p>
<p><img src="/../images/image-20230826174437969.png?lastModify=1695029992" alt="image-20230826174437969"></p>
<h2 id="微信小程序和公众号"><a href="#微信小程序和公众号" class="headerlink" title="微信小程序和公众号"></a>微信小程序和公众号</h2><blockquote>
<p>这两有的会校验数据包中的User-Agent，所以用一些扫描工具的时候要带上对应的User-Agent才行</p>
<p><img src="/../images/image-20230828114848695.png?lastModify=1695029992" alt="image-20230828114848695"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 公众号</span><br><span class="line">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63090621) XWEB/8287 Flue</span><br><span class="line"></span><br><span class="line"># 小程序</span><br><span class="line">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 MicroMessenger/7.0.20.1781(0x6700143B) NetType/WIFI MiniProgramEnv/Windows WindowsWechat/WMPF XWEB/8287</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="小程序接口→Web后台"><a href="#小程序接口→Web后台" class="headerlink" title="小程序接口→Web后台"></a>小程序接口→Web后台</h3><blockquote>
<p>开发者为了方便管理和调试，会在公网 Api 后端服务器上搭建一个后台管理界面从而方便管理数据</p>
</blockquote>
<p>把小程序抓包时的url复制到浏览器中，寻找后台（蛮多的🤗）</p>
<p>比如</p>
<p><img src="/../images/image-20230917224011775.png?lastModify=1695029992" alt="image-20230917224011775"></p>
<p>就这个后台出了三个高危，弱口令，任意文件上传，存储型xss</p>
<h3 id="小程序本身"><a href="#小程序本身" class="headerlink" title="小程序本身"></a>小程序本身</h3><h4 id="小程序结构"><a href="#小程序结构" class="headerlink" title="小程序结构"></a>小程序结构</h4><p><a target="_blank" rel="noopener" href="https://kangzubin.com/wxapp-decompile-2/">微信小程序“反编译”实战（二）：源码还原 | 彬彬的博客 (kangzubin.com)</a></p>
<h4 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h4><p>PC：proxifier+burp</p>
<p>Android：同一个局域网下，wifi代理+burp</p>
<h4 id="反编译"><a href="#反编译" class="headerlink" title="反编译"></a>反编译</h4><p><strong>注意点：进入小程序后，先把各种功能点点，加载更多的程序之后再进行反编译</strong></p>
<p>小程序打开时</p>
<p><img src="/../images/image-20230904221313214.png?lastModify=1695029992" alt="image-20230904221313214"></p>
<p>打开点点点之后，点了一部分后就多了3MB</p>
<p><img src="/../images/image-20230904221135890.png?lastModify=1695029992" alt="image-20230904221135890"></p>
<ul>
<li><p>PC</p>
<p>需要先解密，再反编译，小程序文件位置如下</p>
<p><img src="/../images/image-20230730143531751.png?lastModify=1695029992" alt="image-20230730143531751"></p>
</li>
<li><p>Android</p>
<p>直接反编译即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/data/data/com.tencent.mm/MicroMsg/df69765be7b6e4a441a86a25d26e861f/appbrand/pkg/_-1486048203_3.wxapkg</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="关注点"><a href="#关注点" class="headerlink" title="关注点"></a>关注点</h4><p><img src="/../images/%E5%B0%8F%E7%A8%8B%E5%BA%8FWEB%E6%BC%8F%E6%B4%9E_resultat.png?lastModify=1695029992" alt="image-20200508220108393"></p>
<h3 id="sessionkey泄漏"><a href="#sessionkey泄漏" class="headerlink" title="sessionkey泄漏"></a>sessionkey泄漏</h3><p><img src="/../images/image-20230919105141460.png" alt="image-20230919105141460"></p>
<p>解密</p>
<p><strong><img src="/../images/image-20230919102958607.png" alt="image-20230919102958607"></strong></p>
<h4 id="反编译调试"><a href="#反编译调试" class="headerlink" title="反编译调试"></a>反编译调试</h4><h5 id="报错修复"><a href="#报错修复" class="headerlink" title="报错修复"></a>报错修复</h5><p><img src="/../images/image-20230904215939364.png?lastModify=1695029992" alt="image-20230904215939364"></p>
<p><img src="/../images/image-20230904215953140.png?lastModify=1695029992" alt="image-20230904215953140"></p>
<p>wxml文件（样式文件）报错修复：直接删除</p>
<p>插件修复：遇到不需要使用的插件直接删除，要用到的插件去官方后台添加</p>
<h5 id="流量加密调试"><a href="#流量加密调试" class="headerlink" title="流量加密调试"></a>流量加密调试</h5><h5 id="签名绕过调试"><a href="#签名绕过调试" class="headerlink" title="签名绕过调试"></a>签名绕过调试</h5><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a target="_blank" rel="noopener" href="https://www.hackinn.com/index.php/archives/672/">微信小程序的渗透五脉 - Hack Inn</a></p>
<p><a target="_blank" rel="noopener" href="https://forum.butian.net/share/1227">奇安信攻防社区-浅谈微信小程序渗透</a></p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/community/minihome/list/1591986099080445956/2">安全中心公告 | 微信开放社区</a>	</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/KfhgP97alL_d8mmOY4z44w">反编译&amp;调试小程序请求签名 (qq.com)</a></p>
<h3 id="公众号"><a href="#公众号" class="headerlink" title="公众号"></a>公众号</h3><p>跟web思路一样，注意UA头即可</p>
<h1 id="APP"><a href="#APP" class="headerlink" title="APP"></a>APP</h1><h2 id="Android知识"><a href="#Android知识" class="headerlink" title="Android知识"></a>Android知识</h2><h3 id="APK"><a href="#APK" class="headerlink" title="APK"></a>APK</h3><p>APK（Android Package）文件是Android操作系统上安装应用程序的一种文件格式。APK文件实际上是一个压缩文件，它包含了应用程序的所有代码、资源和其他文件。</p>
<p>APK文件通常具有以下结构：</p>
<ol>
<li><p><code>AndroidManifest.xml</code>：这是APK文件的主要配置文件，它包含应用程序的所有信息，包括应用程序名称、权限、组件等。</p>
<p><img src="/../images/image-20230926222419741.png" alt="image-20230926222419741"></p>
</li>
<li><p><code>classes.dex</code>：这是APK文件中的核心代码文件，它包含了应用程序的所有Java代码。</p>
<blockquote>
<p>DEX（Dalvik Executable）文件是一种专门为Android操作系统设计的可执行文件格式。它是将Java字节码转换为Dalvik字节码的结果。Dalvik字节码是一种特殊的字节码，用于在Android设备上执行Java代码。</p>
<p>Android应用程序中的所有Java代码都被编译成DEX文件，然后打包到APK文件中。当用户安装应用程序时，DEX文件会被解压并加载到设备的内存中，以便在设备上执行应用程序。</p>
</blockquote>
</li>
<li><p><code>resources.arsc</code>: 包含了应用程序的所有非代码资源，如字符串、图像、布局、主题等等。该文件是应用程序中的重要组成部分，用于支持应用程序的多语言和多种配置。</p>
<p><img src="/../images/image-20230926222546190.png" alt="image-20230926222546190"></p>
</li>
<li><p><code>lib/</code>：这个目录包含了应用程序使用的所有本地库文件，通常按照不同的CPU架构分别存放。</p>
<p><img src="/../images/image-20230926222612453.png" alt="image-20230926222612453"></p>
</li>
<li><p><code>res/</code>：这个目录包含了应用程序的所有资源文件，例如布局、字符串、图像等。</p>
<p><img src="/../images/image-20230926222649268.png" alt="image-20230926222649268"></p>
</li>
<li><p><code>assets/</code>：这个目录包含了应用程序的所有未编译的资源文件，例如声音、视频等。</p>
<p><img src="/../images/image-20230926222714428.png" alt="image-20230926222714428"></p>
</li>
<li><p><code>META-INF/</code>：这个目录包含了APK文件的数字签名信息。</p>
<p><img src="/../images/image-20230926222742918.png" alt="image-20230926222742918"></p>
<p><img src="/../images/image-20230926222757403.png" alt="image-20230926222757403"></p>
</li>
</ol>
<h3 id="Android-四大应用程序组件"><a href="#Android-四大应用程序组件" class="headerlink" title="Android 四大应用程序组件"></a>Android 四大应用程序组件</h3><p>安卓应用程序组件指的是构成安卓应用程序的基本单元，主要有以下四种：</p>
<ol>
<li><p>活动（Activity）</p>
<p>负责管理应用程序的用户界面，通过活动可以与用户交互即<strong>呈现可供用户交互的界面</strong>。</p>
</li>
<li><p>服务（Service）</p>
<p>在后台运行的组件，不具有用户界面，主要用于<strong>执行长时间运行的任务或处理与用户界面无关的操作</strong>。服务可以在应用程序内部运行，也可以作为独立的进程运行。常见的应用场景包括播放音乐、下载文件、上传数据等。</p>
</li>
<li><p>广播接收器（Broadcast Receiver）</p>
<p>用于接收系统广播和应用程序广播。即<strong>注册特定事件，并在其发生时被激活</strong>，例如电池电量变化、屏幕开关、网络连接状态等，也可以接收来自其他应用程序发送的广播。</p>
</li>
<li><p>内容提供者（Content Provider）</p>
<p>用于<strong>管理应用程序的数据</strong>，允许其他应用程序访问和共享应用程序的数据。内容提供者可以访问文件系统、SQLite 数据库、网络等数据源。</p>
</li>
</ol>
<h3 id="应用存储数据"><a href="#应用存储数据" class="headerlink" title="应用存储数据"></a>应用存储数据</h3><p>对 <code>android</code> 的每一个应用，<code>android</code> 系统会分配一个私有目录，用于存储应用的私有数据。此私有目录通常位于<code>/data/data/应用名称/</code></p>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><p><strong>APP模拟器</strong></p>
<ul>
<li>夜神模拟器&gt;7.0.2</li>
</ul>
<p><strong>反编译</strong></p>
<ul>
<li>jadx-gui</li>
<li><a target="_blank" rel="noopener" href="http://www.gda.wiki:9090/">GDA主页-亚洲首款交互式Android反编译器</a></li>
</ul>
<p><strong>APK签名</strong></p>
<ul>
<li>signapk</li>
</ul>
<p><strong>APK漏扫分析</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/MobSF/Mobile-Security-Framework-MobSF">MobSF</a>：在线分析APP，也可以用docker搭建</li>
<li><a target="_blank" rel="noopener" href="https://mogua.co/">摸瓜-查诈骗APP<em>查病毒APP</em>免费APK反编译分析工具 (mogua.co)</a></li>
</ul>
<p><strong>其他小工具</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/kelvinBen/AppInfoScanner">AppInfoScanner：APP域名提取</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/sulab999/AppMessenger">sulab999&#x2F;AppMessenger: 一款适用于以APP病毒分析、APP漏洞挖掘、APP开发、HW行动&#x2F;红队&#x2F;渗透测试团队为场景的移动端(Android、iOS)辅助分析工具</a></li>
<li>apktool</li>
</ul>
<p><strong>PC与Andorid通信</strong></p>
<p>ADB</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adb devices <span class="comment"># 列出设备</span></span><br><span class="line">adb connect 127.0.0.1:62001   <span class="comment"># 连接设备</span></span><br><span class="line">adb shell <span class="built_in">whoami</span>  <span class="comment"># 查看当前用户</span></span><br><span class="line">adb shell pm list packages <span class="comment"># 查看应用列表</span></span><br><span class="line">adb shell pm list packages -e -3  <span class="comment"># 查询设备上所有已启用的第三方应用程序的包名列表</span></span><br><span class="line">adb shell getprop ro.build.version.release  <span class="comment"># 安卓系统版本</span></span><br><span class="line">adb push  pc_file android_path  <span class="comment"># 上传文件</span></span><br><span class="line">adb pull android_file pc_path <span class="comment"># 下载文件</span></span><br></pre></td></tr></table></figure>

<p><strong>安装时遇到的问题</strong></p>
<ul>
<li><p>由于找不到adbwinapi.dll,无法继续执行代码。重新安装程序可能会解决此问题</p>
<p>环境变量问题</p>
<p>解：将adb.exe文件复制到Windows&#x2F;system32下;</p>
<p>​       将adbwinapi.dll复制到Windows&#x2F;sysWoW64下。</p>
</li>
</ul>
<p><img src="/../images/image-20230725151602776.png?lastModify=1695029992" alt="image-20230725151602776"></p>
<p>​			解决</p>
<p><img src="/../images/image-20230725151520659.png?lastModify=1695029992" alt="image-20230725151520659"></p>
<p><img src="/../images/image-20230725151508246.png?lastModify=1695029992" alt="image-20230725151508246"></p>
<p>​			更改名字，替换模拟器中的adb即可,成功截图</p>
<p><img src="/../images/image-20230725151826056.png?lastModify=1695029992" alt="image-20230725151826056"></p>
<h2 id="抓包-1"><a href="#抓包-1" class="headerlink" title="抓包"></a>抓包</h2><h3 id="ssl证书校验–HTTP单向认证"><a href="#ssl证书校验–HTTP单向认证" class="headerlink" title="ssl证书校验–HTTP单向认证"></a>ssl证书校验–HTTP单向认证</h3><ul>
<li><p>安卓7.0以下</p>
<p>直接安装burp.cer证书，配置wifi代理即可抓包</p>
</li>
<li><p>安卓7.0及以上</p>
<blockquote>
<p>Android 从 7.0 开始，系统不再信任用户 CA 证书（应用 targetSdkVersion &gt;&#x3D; 24 时生效，如果 targetSdkVersion &lt;24 即使系统是 7.0 + 依然会信任）。</p>
</blockquote>
<p>使用adb安装burp证书的pem格式</p>
</li>
</ul>
<h3 id="代理屏蔽绕过"><a href="#代理屏蔽绕过" class="headerlink" title="代理屏蔽绕过"></a>代理屏蔽绕过</h3><blockquote>
<p>有的app做完ssl证书校验后，为了防止被抓包，多做了一层处理，给app设置自己的代理地址，可能这个代理地址就是服务器的地址，这样就不走我们设置的wifi代理，自然burp也抓不到包了。</p>
</blockquote>
<p>使用postern设置VPN代理绕过</p>
<ul>
<li>配置代理</li>
</ul>
<p><img src="/../images/image-20230904134750565.png?lastModify=1695029992" alt="image-20230904134750565"></p>
<p><img src="/../images/image-20230904134724524.png?lastModify=1695029992" alt="image-20230904134724524"></p>
<ul>
<li><p>配置规则</p>
<p><img src="/../images/image-20230904134947248.png?lastModify=1695029992" alt="image-20230904134947248"></p>
</li>
<li><p>需要<strong>关闭wifi代理</strong>，使用Postern的Vpn代理</p>
<p><img src="/../images/image-20230904135053270.png?lastModify=1695029992" alt="image-20230904135053270"></p>
</li>
</ul>
<h3 id="SSL-Pinning绕过–有问题"><a href="#SSL-Pinning绕过–有问题" class="headerlink" title="SSL-Pinning绕过–有问题"></a>SSL-Pinning绕过–有问题</h3><blockquote>
<p>SSL-pinning有两种方式： 证书锁定（Certificate Pinning） 和公钥锁定（ Public Key Pinning）。</p>
<ul>
<li><strong>证书锁定</strong> 需要在客户端代码内置仅接受指定域名的证书，而不接受操作系统或浏览器内置的CA根证书对应的任何证书，通过这种授权方式，保障了APP与服务端通信的唯一性和安全性，因此客户端与服务端（例如API网关）之间的通信是可以保证绝对安全。但是CA签发证书都存在有效期问题，缺点是在 证书续期后需要将证书重新内置到APP中。</li>
<li><strong>公钥锁定</strong> 提取证书中的公钥并内置到客户端中，通过与服务器对比公钥值来验证连接的正确性。制作证书密钥时，公钥在证书的续期前后都可以保持不变（即密钥对不变），所以可以避免证书有效期问题，一般推荐这种做法。</li>
</ul>
</blockquote>
<p>绕过方法：使用<strong>xposed框架中的JustTrustMe</strong></p>
<blockquote>
<p>Xposed是一个框架，它可以改变系统和应用程序的行为，而不接触任何APK。它支持很多模块，每个模块可以用来帮助实现不同的功能。JustTrustMe 是一个用来禁用、绕过 SSL 证书检查的基于 Xposed 模块。JustTrustMe 是将 APK 中所有用于校验 SSL 证书的 API 都进行了 Hook，从而绕过证书检查。</p>
</blockquote>
<p><strong>遇到的问题</strong></p>
<p>用Xposed+JustTrustMeapp能抓到app的数据包，但是内置网页都访问不到了</p>
<h2 id="测试checklist"><a href="#测试checklist" class="headerlink" title="测试checklist"></a>测试checklist</h2><p><img src="/../images/image-20230926224824412.png" alt="image-20230926224824412"></p>
<h3 id="客户端程序安全"><a href="#客户端程序安全" class="headerlink" title="客户端程序安全"></a>客户端程序安全</h3><h4 id="安装包签名校验"><a href="#安装包签名校验" class="headerlink" title="安装包签名校验"></a>安装包签名校验</h4><blockquote>
<p>如果 APK 没有 使用自己的证书进行签名，将会失去对版本管理的主动权。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">jarsigner -verify -certs -verbose apk</span><br></pre></td></tr></table></figure>

<p><img src="/../images/image-20230904114950022.png?lastModify=1695029992" alt="image-20230904114950022"></p>
<p>jadx-gui</p>
<p><img src="/../images/image-20230904115047184.png?lastModify=1695029992" alt="image-20230904115047184"></p>
<h4 id="反编译保护"><a href="#反编译保护" class="headerlink" title="反编译保护"></a>反编译保护</h4><blockquote>
<p>没有反编译保护，可能被恶意人员进行逆向破解等操作。</p>
</blockquote>
<p>直接使用jadx-gui打开即可，如果混淆后的代码样例，除了覆写和接口以外的字段都是无意义的名称，则说明是安全的，如下即为安全的。</p>
<p><img src="/../images/image-20230927104447402.png" alt="image-20230927104447402"></p>
<h4 id="应用完整性校检"><a href="#应用完整性校检" class="headerlink" title="应用完整性校检"></a>应用完整性校检</h4><blockquote>
<p>攻击者能够通过反编译的方法在客户端程序中植入自己的木马，客户端程序如果没有自校验机制的话，攻击者可能会通过篡改客户端程序窃取手机用户的隐私信息。</p>
</blockquote>
<p><strong>解包</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -jar apktool.jar d -f APK -o DIR</span><br></pre></td></tr></table></figure>

<p><strong>修改资源文件</strong></p>
<p>改一些容易分辨的，比如logo</p>
<p><code>assets/pmbwe64/css/banklogo/logo</code></p>
<p><img src="/../images/image-20230927110713736.png" alt="image-20230927110713736"></p>
<p><strong>打包</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -jar apktool.jar b -f DIR -o new.apk</span><br></pre></td></tr></table></figure>

<p><strong>对生成的APK进行签名</strong></p>
<blockquote>
<p>APK 必须进行签名后，方可安装和运行。如果开启了“允许未知来源的应 用”，那么 Debug 证书、自签名证书、过期证书的签名都是可以的，但是不可以不签 名。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -jar signapk.jar testkey.x509.pem testkey.pk8 待签名APK 输出APK</span><br></pre></td></tr></table></figure>

<p><strong>重新安装启动，观察是否有自校验</strong></p>
<h4 id="不恰当的配置"><a href="#不恰当的配置" class="headerlink" title="不恰当的配置"></a>不恰当的配置</h4><ul>
<li><p>Debug模式</p>
<blockquote>
<p>客户端软件 <code>AndroidManifest.xml</code> 中的 <code>android:debuggable=&quot;true&quot;</code>标记如果开启，可被Java 调试工具例如 jdb 进行调试，获取和篡改用户敏感信息，甚至分析并且修改代码实现的业务逻辑，我们经常使用 android.util.Log 来打印日志，软件发布后调试日志被其他开发者看到，容易被反编译破解。</p>
</blockquote>
</li>
<li><p>应用程序数据可备份</p>
<blockquote>
<p><code>AndroidMainfest.xml</code> 文件中的 <code>allowBackup</code> 属性值控制，其默认值为 <code>true</code>。当该属性没有显式设置为 <code>false</code> 时,攻击者可通过 <code>adb backup</code> 和 <code>adb restore</code> 对 App 的应用数据进行备份和恢复，从而可能获取明文存储的用户敏感信息。</p>
</blockquote>
</li>
</ul>
<p>使用jadx-gui打开搜索即可</p>
<h3 id="敏感信息安全测试"><a href="#敏感信息安全测试" class="headerlink" title="敏感信息安全测试"></a>敏感信息安全测试</h3><ul>
<li><p>APK反编译源码中泄漏的敏感信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">jadx-gui搜索</span><br><span class="line">漏扫平台</span><br></pre></td></tr></table></figure>
</li>
<li><p>私有目录下的文件权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ADB连接查看</span><br></pre></td></tr></table></figure>
</li>
<li><p>私有目录下的文件信息泄漏</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ADB连接查找</span><br></pre></td></tr></table></figure>
</li>
<li><p>日志是否打印敏感数据</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adb logcat //持续输出日志，直到 Ctrl+C </span><br><span class="line">adb logcat -d &gt; log.txt //一次性输出日志缓存，不会阻塞 </span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="参考文章-1"><a href="#参考文章-1" class="headerlink" title="参考文章"></a>参考文章</h2><p>App安全检测指南</p>
<p>[<a target="_blank" rel="noopener" href="https://blog.gm7.org/%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E5%BA%93/04.%E7%A7%BB%E5%8A%A8%E5%AE%89%E5%85%A8/98.%E5%B8%B8%E8%A7%84%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B/01.Android%20APP%E5%B8%B8%E8%A7%84%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B.html]">https://blog.gm7.org/%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E5%BA%93/04.%E7%A7%BB%E5%8A%A8%E5%AE%89%E5%85%A8/98.%E5%B8%B8%E8%A7%84%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B/01.Android%20APP%E5%B8%B8%E8%A7%84%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B.html]</a>(<a target="_blank" rel="noopener" href="https://blog.gm7.org/%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E5%BA%93/04.%E7%A7%BB%E5%8A%A8%E5%AE%89%E5%85%A8/98.%E5%B8%B8%E8%A7%84%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B/01.Android">https://blog.gm7.org/个人知识库/04.移动安全/98.常规测试流程/01.Android</a> APP常规测试流程.html)</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=Mzg2NjUzNzg4Ng==&mid=2247483971&idx=1&sn=f4c726acbb472303b63c78bc442dddc8&chksm=ce481ab2f93f93a4cd3ba0cc1f66a6e98b25c6be28aacb19b0d228cb549967518d60da3858f3&cur_album_id=2988852703969787904&scene=189#wechat_redirect">App防抓包有四种绕过方法（详细）</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/36538699">如何使用Xposed+JustTrustMe来突破SSL Pinning - 知乎</a></p>
<h1 id="业务安全"><a href="#业务安全" class="headerlink" title="业务安全"></a>业务安全</h1><p>业务大于安全，安全只是锦上添花罢了😭</p>
<h2 id="业务梳理"><a href="#业务梳理" class="headerlink" title="业务梳理"></a>业务梳理</h2><p>可以先将业务主体划分为几个大模块，再将每个大模块逐个细分为子模 块。</p>
<p>可以从账号体系开始，如用户的注册、登录、密码找回、信息存储等。</p>
<p>再到具体的业 务办理，如商品的搜索、选择、支付、生成订单，以及订单查询和用户评论等。</p>
<p><img src="/../images/image-20230713141756097.png?lastModify=1695029992" alt="image-20230713141756097"></p>
<p>​	再根据业务场景梳理出流程图</p>
<p><img src="/../images/image-20230713141918648.png?lastModify=1695029992" alt="image-20230713141918648"></p>
<p><img src="/../images/image-20230713134331110.png?lastModify=1695029992" alt="image-20230713134331110"></p>
<h3 id="测试方法"><a href="#测试方法" class="headerlink" title="测试方法"></a>测试方法</h3><p><img src="/../images/image-20230713134200584.png?lastModify=1695029992" alt="image-20230713134200584"></p>
<h2 id="测试checklist-1"><a href="#测试checklist-1" class="headerlink" title="测试checklist"></a>测试checklist</h2><ul>
<li><p>登录</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">暴力破解</span><br><span class="line">session</span><br><span class="line">cookie</span><br><span class="line">用户名枚举</span><br><span class="line">任意用户登录</span><br></pre></td></tr></table></figure>
</li>
<li><p>注册</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用户名枚举</span><br><span class="line">用户注册覆盖</span><br><span class="line">任意用户注册</span><br><span class="line">用户名xss</span><br></pre></td></tr></table></figure>
</li>
<li><p>访问控制</p>
<ul>
<li><p>垂直越权</p>
<p>权限校验不充分，导致低权限用户可以访问高权限用户的接口</p>
</li>
<li><p>水平越权</p>
<p>常见的是通过数字遍历，不过最好注册两个账号来进行对比发现规律，更少遗漏</p>
</li>
</ul>
</li>
<li><p>支付问题</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">金额篡改</span><br><span class="line">编号篡改</span><br><span class="line">数量篡改</span><br><span class="line">购买限制绕过</span><br><span class="line">并发</span><br></pre></td></tr></table></figure>
</li>
<li><p>验证码问题</p>
</li>
<li><p>密码重置问题</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">session覆盖（session校验身份）</span><br><span class="line">密码重置链接（弱Token:时间戳，uid加密/编码   uid:任意重置其他用户）</span><br><span class="line">修改用于校验的手机号/邮箱</span><br><span class="line">验证码问题</span><br></pre></td></tr></table></figure>
</li>
<li><p>通用型</p>
<ul>
<li><p>请求提交后由前端进行校验，此时可以拦截返回包，修改返回包中的内容，从而通过校验。</p>
</li>
<li><p>先进入后台界面，再弹出校验界面，可以尝试drop掉该校验数据包</p>
</li>
<li><p>多流程跳过</p>
<p>（1）用户输入找回密码的账号； </p>
<p>（2）校验凭证：向用户发送短信验证码或者找回密码链接，用户回填验证码或单击 链接进入密码重置页面，以此方式证明当前操作用户是账号主人； </p>
<p>（3）校验成功进入重置密码页面。</p>
<p>找出最后一步重置密码的接口，接着使用URL测试是否可以跳过验证身份环节。</p>
</li>
</ul>
</li>
</ul>
<h2 id="修复方案"><a href="#修复方案" class="headerlink" title="修复方案"></a>修复方案</h2><p>大部分都是因为权限控制做的有问题，使用正确的JWT来进行校验</p>
<h1 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h1><h2 id="Linux命令"><a href="#Linux命令" class="headerlink" title="Linux命令"></a>Linux命令</h2><blockquote>
<p>Winodws下可以装个wls2</p>
<p>尴尬点😅</p>
<p>wsl2需要开启hyper-V，但是安卓模拟器又要关闭hyper-v，而且VM15.5以下的版本也需要关闭hyper-V。</p>
</blockquote>
<ul>
<li><p>图标哈希指纹提取</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl https://hunter.qianxin.com/favicon.ico | md5sum</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">hunter</span></span><br><span class="line">web.icon=&quot;md5&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">360</span></span><br><span class="line">favicon:&quot;MD5&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>敏感信息查找</p>
<p>整合成sh脚本，一键提取</p>
<ul>
<li><p>提取Nginx日志文件中的200</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -EHirn <span class="string">&quot;HTTP/1.1\&quot; 200&quot;</span> wxtest.zyxt.com.cn  | <span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 2- &gt; 200.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>提取url</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">grep -EHirn &quot;http://|https://&quot; 200.txt  | cut -d &#x27;:&#x27; -f 2- &gt; url.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>提取账密</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -EHirn <span class="string">&quot;username|password|密码|passwd|pass|testuser|user|pwd|dbuser|token|jdbc|admin|login&quot;</span> 200.txt  | <span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 2- &gt; pass.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>提取各种key</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -EHirn <span class="string">&quot;ak|密钥|accesskey|apikey|key|secret|corpid|corpsecret|cloud|oss&quot;</span> 200.txt | <span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 2- &gt; key.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>提取文件下载</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -EHirn <span class="string">&quot;\?file|download|attachment&quot;</span>  | <span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 2- &gt; FileDownload.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>提取个人敏感信息</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -EHirn <span class="string">&quot;phone|mobile|card|real_name|\.png|\.jpg|\.mp4&quot;</span>  | <span class="built_in">cut</span> -d <span class="string">&#x27;:&#x27;</span> -f 2- &gt; LeakInfo.txt</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>文件下载</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">目录遍历漏洞，目录名默认为host</span></span><br><span class="line">wget -r --no-pare  url /mnt/c/Users/khaz/Downloads</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">批量下载,比如存储桶遍历</span></span><br><span class="line">wget -i urls.txt -P Download/</span><br></pre></td></tr></table></figure>
</li>
<li><p>文本类</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sort filename | uniq # 排序+去重</span><br><span class="line">cat file1.txt file2.txt fileN.txt &gt; out.txt # 文本合并</span><br></pre></td></tr></table></figure>
</li>
<li><p>javaweb查找数据库配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">find 路径 -type f |xargs grep &quot;com.mysql.jdbc.Driver&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>xargs</code> 命令从标准输入或指定的文件中读取输入。</p>
</blockquote>
</li>
</ul>
<h2 id="参数值"><a href="#参数值" class="headerlink" title="参数值"></a>参数值</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">置空</span><br><span class="line">删除</span><br><span class="line">Null</span><br><span class="line">None</span><br><span class="line">%  模糊查询，可能直接全部查出来了</span><br></pre></td></tr></table></figure>



<h2 id="请求包转换为脚本请求"><a href="#请求包转换为脚本请求" class="headerlink" title="请求包转换为脚本请求"></a>请求包转换为脚本请求</h2><p>burp：copy as curl commad</p>
<p><a target="_blank" rel="noopener" href="https://curlconverter.com/">Convert curl commands to code</a></p>
<p><img src="/../images/image-20230827111636995.png" alt="image-20230827111636995"></p>
<h2 id="文件，目录扫描"><a href="#文件，目录扫描" class="headerlink" title="文件，目录扫描"></a>文件，目录扫描</h2><p>域名的一部分，公司名称的缩写，目录名（目录为&#x2F;cn，备份文件为&#x2F;cn&#x2F;cn.rar）</p>
<h1 id="搜索引擎语法"><a href="#搜索引擎语法" class="headerlink" title="搜索引擎语法"></a>搜索引擎语法</h1><h2 id="Google"><a href="#Google" class="headerlink" title="Google"></a>Google</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 公开文件</span></span><br><span class="line">site:domain ext:doc | ext:docx | ext:odt | ext:pdf | ext:rtf | ext:sxw | ext:psw | ext:ppt | ext:pptx | ext:pps | ext:csv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 后台</span></span><br><span class="line">intitle:管理|后台|登陆|平台|系统 or inurl:login|admin|manage|manager|admin_login|system</span><br><span class="line"></span><br><span class="line"><span class="comment"># 必须出现xxx</span></span><br><span class="line"><span class="string">&quot;xxx&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索网站正文内容</span></span><br><span class="line">intext:xxx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索缓存内容</span></span><br><span class="line">cache:</span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索url</span></span><br><span class="line">inurl:</span><br><span class="line"></span><br><span class="line"><span class="comment"># 过滤内容</span></span><br><span class="line">-xxx</span><br></pre></td></tr></table></figure>

<h2 id="空间搜索引擎"><a href="#空间搜索引擎" class="headerlink" title="空间搜索引擎"></a>空间搜索引擎</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">title=<span class="string">&quot;Directory listing for /&quot;</span></span><br><span class="line">title=<span class="string">&quot;index of/&quot;</span></span><br><span class="line">title=<span class="string">&quot;phpinfo&quot;</span></span><br><span class="line">tile=<span class="string">&quot;outlook&quot;</span> / <span class="string">&quot;tomcat&quot;</span> / <span class="string">&quot;weblogic&quot;</span>  <span class="comment"># 查找特定应用</span></span><br><span class="line">(title=<span class="string">&quot;平台&quot;</span>||title=<span class="string">&quot;管理&quot;</span>||title=<span class="string">&quot;系统&quot;</span>||title=<span class="string">&quot;后台&quot;</span>||title=<span class="string">&quot;登录&quot;</span>)</span><br><span class="line"></span><br><span class="line">server=<span class="string">&quot;WebSockify Python&quot;</span> &amp;&amp; title=<span class="string">&quot;Directory listing for /&quot;</span>  <span class="comment"># 查找novnc（novnc运行在容器里）</span></span><br><span class="line">header=xxx <span class="comment"># 请求头  感觉hunter的多</span></span><br></pre></td></tr></table></figure>

<p><strong>Hunter</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(icp.name=<span class="string">&quot;银行&quot;</span>||icp.name=<span class="string">&quot;信用合作联社&quot;</span>||icp.name=<span class="string">&quot;信用社联合社&quot;</span>)</span><br><span class="line"></span><br><span class="line">(icp.name=<span class="string">&quot;信托有限&quot;</span>||icp.name=<span class="string">&quot;财务有限&quot;</span>||icp.name=<span class="string">&quot;理财有限&quot;</span>)</span><br><span class="line"></span><br><span class="line">(icp.name=<span class="string">&quot;天然气集团&quot;</span>||icp.name=<span class="string">&quot;核工业集团&quot;</span>||icp.name=<span class="string">&quot;国家电网&quot;</span>||icp.name=<span class="string">&quot;石油化工&quot;</span>||icp.name=<span class="string">&quot;能源集团&quot;</span>)</span><br><span class="line"></span><br><span class="line">app.name==<span class="string">&quot;Vue.js&quot;</span>&amp;&amp;(icp.name=<span class="string">&quot;银行&quot;</span>)&amp;&amp;(title=<span class="string">&quot;平台&quot;</span>||title=<span class="string">&quot;管理&quot;</span>||title=<span class="string">&quot;系统&quot;</span>||title=<span class="string">&quot;后台&quot;</span>||title=<span class="string">&quot;登录&quot;</span>)</span><br><span class="line"></span><br><span class="line">icp.industry=<span class="string">&quot;货币金融服务&quot;</span></span><br><span class="line"></span><br><span class="line">ip.province=<span class="string">&quot;江苏&quot;</span>	搜索IP对应主机在江苏省的资产</span><br><span class="line">ip.country=<span class="string">&quot;CN&quot;</span>      中国资产（空间搜索引擎搜到的国外的都是bc，狠狠地污染）</span><br></pre></td></tr></table></figure>

<p><strong>FoFa</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/ibaiw/fofa">Fofa网络测绘命令汇总</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cert=英文缩写   <span class="comment"># 证书内容</span></span><br><span class="line">cert.subject=英文缩写 <span class="comment"># 证书持有者</span></span><br><span class="line">cert.issuer=英文缩写 <span class="comment"># 证书颁发者</span></span><br><span class="line"></span><br><span class="line">org=<span class="string">&quot;China Education and Research Network Center&quot;</span> <span class="comment">#教育网段</span></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://Fgtbnc.github.io">Khaz</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://fgtbnc.github.io/2023/08/03/%E5%B8%B8%E8%A7%81%E7%82%B9%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E5%B0%8F%E7%BB%93/">http://fgtbnc.github.io/2023/08/03/%E5%B8%B8%E8%A7%81%E7%82%B9%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E5%B0%8F%E7%BB%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://Fgtbnc.github.io" target="_blank">Khaz's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://fgtbnc.github.io/images/wallhaven-vg3qk8.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/08/03/%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E8%AE%B0%E5%BD%95/"><img class="next-cover" src="https://fgtbnc.github.io/images/wallhaven-yxe8kk.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">常见应用记录</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/Khazing/typora-img/main/16870577801892f4a9c5aac2e9e5422a6ccd26db10dd88c73.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Khaz</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">脚本小子的学习笔记</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%84%9F%E5%8F%97"><span class="toc-number">1.</span> <span class="toc-text">感受</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E7%AE%B1"><span class="toc-number">2.</span> <span class="toc-text">工具箱</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%82%B9%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF"><span class="toc-number">3.</span> <span class="toc-text">常见点渗透思路</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8E%E5%8F%B0"><span class="toc-number">3.1.</span> <span class="toc-text">后台</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%B1%E5%8F%A3%E4%BB%A4"><span class="toc-number">3.2.</span> <span class="toc-text">弱口令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#403%EF%BC%8C404"><span class="toc-number">3.3.</span> <span class="toc-text">403，404</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%90%E7%BA%A7%E7%9B%AE%E5%BD%95fuzz"><span class="toc-number">3.3.1.</span> <span class="toc-text">逐级目录fuzz</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#403bypass"><span class="toc-number">3.3.2.</span> <span class="toc-text">403bypass</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E5%AE%89%E5%85%A8"><span class="toc-number">3.4.</span> <span class="toc-text">云安全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E6%A1%B6"><span class="toc-number">3.4.1.</span> <span class="toc-text">存储桶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker"><span class="toc-number">3.4.2.</span> <span class="toc-text">Docker</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="toc-number">3.5.</span> <span class="toc-text">验证码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="toc-number">3.5.1.</span> <span class="toc-text">短信验证码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.6.</span> <span class="toc-text">API接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JWT"><span class="toc-number">3.7.</span> <span class="toc-text">JWT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91"><span class="toc-number">3.8.</span> <span class="toc-text">并发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%92%8C%E5%85%AC%E4%BC%97%E5%8F%B7"><span class="toc-number">3.9.</span> <span class="toc-text">微信小程序和公众号</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E2%86%92Web%E5%90%8E%E5%8F%B0"><span class="toc-number">3.9.1.</span> <span class="toc-text">小程序接口→Web后台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%9C%AC%E8%BA%AB"><span class="toc-number">3.9.2.</span> <span class="toc-text">小程序本身</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84"><span class="toc-number">3.9.2.1.</span> <span class="toc-text">小程序结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%93%E5%8C%85"><span class="toc-number">3.9.2.2.</span> <span class="toc-text">抓包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E7%BC%96%E8%AF%91"><span class="toc-number">3.9.2.3.</span> <span class="toc-text">反编译</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E6%B3%A8%E7%82%B9"><span class="toc-number">3.9.2.4.</span> <span class="toc-text">关注点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sessionkey%E6%B3%84%E6%BC%8F"><span class="toc-number">3.9.3.</span> <span class="toc-text">sessionkey泄漏</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95"><span class="toc-number">3.9.3.1.</span> <span class="toc-text">反编译调试</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E4%BF%AE%E5%A4%8D"><span class="toc-number">3.9.3.1.1.</span> <span class="toc-text">报错修复</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E5%8A%A0%E5%AF%86%E8%B0%83%E8%AF%95"><span class="toc-number">3.9.3.1.2.</span> <span class="toc-text">流量加密调试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AD%BE%E5%90%8D%E7%BB%95%E8%BF%87%E8%B0%83%E8%AF%95"><span class="toc-number">3.9.3.1.3.</span> <span class="toc-text">签名绕过调试</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="toc-number">3.9.3.2.</span> <span class="toc-text">参考文章</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AC%E4%BC%97%E5%8F%B7"><span class="toc-number">3.9.4.</span> <span class="toc-text">公众号</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#APP"><span class="toc-number">4.</span> <span class="toc-text">APP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Android%E7%9F%A5%E8%AF%86"><span class="toc-number">4.1.</span> <span class="toc-text">Android知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#APK"><span class="toc-number">4.1.1.</span> <span class="toc-text">APK</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Android-%E5%9B%9B%E5%A4%A7%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">4.1.2.</span> <span class="toc-text">Android 四大应用程序组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">4.1.3.</span> <span class="toc-text">应用存储数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7"><span class="toc-number">4.2.</span> <span class="toc-text">工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%93%E5%8C%85-1"><span class="toc-number">4.3.</span> <span class="toc-text">抓包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ssl%E8%AF%81%E4%B9%A6%E6%A0%A1%E9%AA%8C%E2%80%93HTTP%E5%8D%95%E5%90%91%E8%AE%A4%E8%AF%81"><span class="toc-number">4.3.1.</span> <span class="toc-text">ssl证书校验–HTTP单向认证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E5%B1%8F%E8%94%BD%E7%BB%95%E8%BF%87"><span class="toc-number">4.3.2.</span> <span class="toc-text">代理屏蔽绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSL-Pinning%E7%BB%95%E8%BF%87%E2%80%93%E6%9C%89%E9%97%AE%E9%A2%98"><span class="toc-number">4.3.3.</span> <span class="toc-text">SSL-Pinning绕过–有问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95checklist"><span class="toc-number">4.4.</span> <span class="toc-text">测试checklist</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%A8%8B%E5%BA%8F%E5%AE%89%E5%85%A8"><span class="toc-number">4.4.1.</span> <span class="toc-text">客户端程序安全</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%8C%85%E7%AD%BE%E5%90%8D%E6%A0%A1%E9%AA%8C"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">安装包签名校验</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E7%BC%96%E8%AF%91%E4%BF%9D%E6%8A%A4"><span class="toc-number">4.4.1.2.</span> <span class="toc-text">反编译保护</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%AE%8C%E6%95%B4%E6%80%A7%E6%A0%A1%E6%A3%80"><span class="toc-number">4.4.1.3.</span> <span class="toc-text">应用完整性校检</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E6%81%B0%E5%BD%93%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">4.4.1.4.</span> <span class="toc-text">不恰当的配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95"><span class="toc-number">4.4.2.</span> <span class="toc-text">敏感信息安全测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0-1"><span class="toc-number">4.5.</span> <span class="toc-text">参考文章</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E5%AE%89%E5%85%A8"><span class="toc-number">5.</span> <span class="toc-text">业务安全</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E6%A2%B3%E7%90%86"><span class="toc-number">5.1.</span> <span class="toc-text">业务梳理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95"><span class="toc-number">5.1.1.</span> <span class="toc-text">测试方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95checklist-1"><span class="toc-number">5.2.</span> <span class="toc-text">测试checklist</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88"><span class="toc-number">5.3.</span> <span class="toc-text">修复方案</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="toc-number">6.</span> <span class="toc-text">小技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E5%91%BD%E4%BB%A4"><span class="toc-number">6.1.</span> <span class="toc-text">Linux命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E5%80%BC"><span class="toc-number">6.2.</span> <span class="toc-text">参数值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%8C%85%E8%BD%AC%E6%8D%A2%E4%B8%BA%E8%84%9A%E6%9C%AC%E8%AF%B7%E6%B1%82"><span class="toc-number">6.3.</span> <span class="toc-text">请求包转换为脚本请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%EF%BC%8C%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F"><span class="toc-number">6.4.</span> <span class="toc-text">文件，目录扫描</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E8%AF%AD%E6%B3%95"><span class="toc-number">7.</span> <span class="toc-text">搜索引擎语法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Google"><span class="toc-number">7.1.</span> <span class="toc-text">Google</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E"><span class="toc-number">7.2.</span> <span class="toc-text">空间搜索引擎</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/08/03/%E5%B8%B8%E8%A7%81%E7%82%B9%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E5%B0%8F%E7%BB%93/" title="Pentest Note"><img src="https://fgtbnc.github.io/images/wallhaven-vg3qk8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pentest Note"/></a><div class="content"><a class="title" href="/2023/08/03/%E5%B8%B8%E8%A7%81%E7%82%B9%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E5%B0%8F%E7%BB%93/" title="Pentest Note">Pentest Note</a><time datetime="2023-08-03T11:48:25.000Z" title="发表于 2023-08-03 19:48:25">2023-08-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/03/%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E8%AE%B0%E5%BD%95/" title="常见应用记录"><img src="https://fgtbnc.github.io/images/wallhaven-yxe8kk.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常见应用记录"/></a><div class="content"><a class="title" href="/2023/08/03/%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E8%AE%B0%E5%BD%95/" title="常见应用记录">常见应用记录</a><time datetime="2023-08-03T11:46:25.000Z" title="发表于 2023-08-03 19:46:25">2023-08-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/26/Sql%E6%B3%A8%E5%85%A5-Mysql/" title="Sql注入详解--Mysql"><img src="https://fgtbnc.github.io/images/wallhaven-vg3qk8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Sql注入详解--Mysql"/></a><div class="content"><a class="title" href="/2023/06/26/Sql%E6%B3%A8%E5%85%A5-Mysql/" title="Sql注入详解--Mysql">Sql注入详解--Mysql</a><time datetime="2023-06-26T11:52:40.000Z" title="发表于 2023-06-26 19:52:40">2023-06-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/26/Waf%E7%BB%95%E8%BF%87%E5%AD%A6%E4%B9%A0/" title="WAF绕过学习"><img src="https://fgtbnc.github.io/images/wallhaven-xlz933.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WAF绕过学习"/></a><div class="content"><a class="title" href="/2023/06/26/Waf%E7%BB%95%E8%BF%87%E5%AD%A6%E4%B9%A0/" title="WAF绕过学习">WAF绕过学习</a><time datetime="2023-06-26T11:50:25.000Z" title="发表于 2023-06-26 19:50:25">2023-06-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/26/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B/" title="渗透测试流程"><img src="https://fgtbnc.github.io/images/wallhaven-vg3qk8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="渗透测试流程"/></a><div class="content"><a class="title" href="/2023/06/26/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B/" title="渗透测试流程">渗透测试流程</a><time datetime="2023-06-26T11:48:25.000Z" title="发表于 2023-06-26 19:48:25">2023-06-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Khaz</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script src="/js/chocolate.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>